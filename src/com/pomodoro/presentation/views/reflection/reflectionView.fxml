<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.text.*?>

<AnchorPane xmlns="http://javafx.com/javafx"
    xmlns:fx="http://javafx.com/fxml"
    fx:controller="com.pomodoro.presentation.views.reflection.ReflectionViewController"
    styleClass="reflection-view"
    stylesheets="@styles.css">

    <VBox spacing="24" alignment="CENTER"
        AnchorPane.topAnchor="0.0"
        AnchorPane.bottomAnchor="0.0"
        AnchorPane.leftAnchor="0.0"
        AnchorPane.rightAnchor="0.0">

        <!-- Header -->
        <VBox alignment="CENTER" spacing="8">
            <Text fx:id="subtitleText"
                text="Lass uns eine Pause einlegen und reflektieren."
                styleClass="subtitle" />
            <Text fx:id="titleText"
                text="Was hast du in dieser Sitzung gelernt?"
                styleClass="title" />
        </VBox>

        <!-- Mood Selection -->
        <HBox fx:id="moodSelector" alignment="CENTER" spacing="16">
            <Button styleClass="mood-button" onAction="#selectMood">
                <graphic>
                    <Text text="😔" />
                </graphic>
            </Button>
            <Button styleClass="mood-button" onAction="#selectMood">
                <graphic>
                    <Text text="😐" />
                </graphic>
            </Button>
            <Button styleClass="mood-button" onAction="#selectMood">
                <graphic>
                    <Text text="😊" />
                </graphic>
            </Button>
        </HBox>

        <!-- Category Section -->
        <VBox spacing="8">
            <Label text="Kategorie" styleClass="label-header" />
            <ComboBox fx:id="categoryComboBox"
                promptText="Kategorie hinzufügen"
                styleClass="category-combo"
                editable="true" />
            <FlowPane fx:id="categoryChips"
                hgap="8" vgap="8"
                styleClass="category-chips" />
        </VBox>

        <!-- Notes Section -->
        <VBox spacing="8" VBox.vgrow="ALWAYS">
            <TextArea fx:id="reflectionArea"
                wrapText="true"
                styleClass="reflection-area"
                VBox.vgrow="ALWAYS" />
            <HBox alignment="CENTER_RIGHT">
                <Text fx:id="characterCount"
                    text="0/500"
                    styleClass="character-count" />
            </HBox>
        </VBox>

        <!-- Action Buttons -->
        <HBox alignment="CENTER" spacing="16">
            <Button fx:id="saveButton"
                text="Info speichern"
                styleClass="save-button"
                onAction="#saveReflection" />
            <Button fx:id="closeButton"
                styleClass="close-button"
                onAction="#closeDialog" />
        </HBox>
    </VBox>
</AnchorPane>